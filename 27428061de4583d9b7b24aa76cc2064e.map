{"version":3,"names":["raulIconCss","kindDirectory","family","icon","consumer","illustration","product","resource","iconCache","requests","RaulIcon","class_1","hostRef","this","kind","prototype","iconChanged","loadSVG","componentWillLoad","fetchSVG","fetch","concat","resp","_a","sent","ok","text","Error","console","error","e_1","key","svg","_svg","replace","pathId","svgContent","render","h","class","innerHTML"],"sources":["node_modules/@realpage/raul3/collection/components/elements/raul-icon/raul-icon.css?tag=raul-icon","node_modules/@realpage/raul3/collection/components/elements/raul-icon/raul-icon.js"],"sourcesContent":["raul-icon {\n  display: inline-block;\n  vertical-align: middle;\n}\n\nraul-icon svg {\n  display: block;\n  height: 1em;\n  width: 1em;\n}\n\nraul-icon svg g[fill=none] circle,\nraul-icon svg g[fill=none] ellipse,\nraul-icon svg g[fill=none] path,\nraul-icon svg g[fill=none] polygon,\nraul-icon svg g[fill=none] polyline,\nraul-icon svg g[fill=none] rect, raul-icon svg g[style*=\"fill:none\"] circle,\nraul-icon svg g[style*=\"fill:none\"] ellipse,\nraul-icon svg g[style*=\"fill:none\"] path,\nraul-icon svg g[style*=\"fill:none\"] polygon,\nraul-icon svg g[style*=\"fill:none\"] polyline,\nraul-icon svg g[style*=\"fill:none\"] rect {\n  fill: inherit !important;\n}\n\nraul-icon svg circle:not([fill=none]):not([style*=\"fill:none\"]),\nraul-icon svg ellipse:not([fill=none]):not([style*=\"fill:none\"]),\nraul-icon svg path:not([fill=none]):not([style*=\"fill:none\"]),\nraul-icon svg polygon:not([fill=none]):not([style*=\"fill:none\"]),\nraul-icon svg polyline:not([fill=none]):not([style*=\"fill:none\"]),\nraul-icon svg rect:not([fill=none]):not([style*=\"fill:none\"]) {\n  fill: currentColor !important;\n}\n\nraul-icon[kind=product] rect:not([fill=none]):not([style*=\"fill:none\"]) {\n  fill: none !important;\n}","import { h } from \"@stencil/core\";\r\nconst kindDirectory = {\r\n    family: 'families',\r\n    icon: 'icons',\r\n    consumer: 'icons-consumer',\r\n    illustration: 'icons-illustration',\r\n    product: 'products',\r\n    resource: 'resources'\r\n};\r\nconst iconCache = {};\r\nconst requests = {};\r\nexport class RaulIcon {\r\n    constructor() {\r\n        this.icon = null;\r\n        this.kind = 'icon';\r\n    }\r\n    iconChanged() {\r\n        this.loadSVG();\r\n    }\r\n    componentWillLoad() {\r\n        this.loadSVG();\r\n    }\r\n    async fetchSVG() {\r\n        try {\r\n            const resp = await fetch(`//cdn.realpage.com/images/${kindDirectory[this.kind]}/${this.icon}.svg`);\r\n            if (resp && resp.ok) {\r\n                return resp.text();\r\n            }\r\n            else {\r\n                throw new Error(`[RAUL] Failed to fetch icon ${this.kind}/${this.icon}`);\r\n            }\r\n        }\r\n        catch (e) {\r\n            console.error(e);\r\n        }\r\n    }\r\n    async loadSVG() {\r\n        if (this.icon) {\r\n            const key = `${this.kind}-${this.icon}`;\r\n            if (!iconCache[key]) {\r\n                if (!requests[key]) {\r\n                    requests[key] = this.fetchSVG();\r\n                }\r\n                const svg = await requests[key];\r\n                delete requests[key];\r\n                if (svg) {\r\n                    //this is because svg's can be focused in IE with the tab key and this breaks keyboard/tab navigationlet\r\n                    let _svg = svg.replace('<svg', '<svg aria-hidden=\"true\" focusable=\"false\" ');\r\n                    //replace `path-1` with an unique ID because icons are exported with the same id and it breaks the icons.\r\n                    _svg = _svg.replace(/path-1/g, `path-${pathId++}-raul`);\r\n                    iconCache[key] = _svg;\r\n                }\r\n            }\r\n            this.svgContent = iconCache[key];\r\n        }\r\n    }\r\n    render() {\r\n        return (h(\"i\", { class: \"r-icon\", innerHTML: this.svgContent }));\r\n    }\r\n    static get is() { return \"raul-icon\"; }\r\n    static get originalStyleUrls() { return {\r\n        \"$\": [\"raul-icon.scss\"]\r\n    }; }\r\n    static get styleUrls() { return {\r\n        \"$\": [\"raul-icon.css\"]\r\n    }; }\r\n    static get properties() { return {\r\n        \"icon\": {\r\n            \"type\": \"string\",\r\n            \"mutable\": false,\r\n            \"complexType\": {\r\n                \"original\": \"string\",\r\n                \"resolved\": \"string\",\r\n                \"references\": {}\r\n            },\r\n            \"required\": false,\r\n            \"optional\": false,\r\n            \"docs\": {\r\n                \"tags\": [],\r\n                \"text\": \"\"\r\n            },\r\n            \"attribute\": \"icon\",\r\n            \"reflect\": true,\r\n            \"defaultValue\": \"null\"\r\n        },\r\n        \"kind\": {\r\n            \"type\": \"string\",\r\n            \"mutable\": false,\r\n            \"complexType\": {\r\n                \"original\": \"string\",\r\n                \"resolved\": \"string\",\r\n                \"references\": {}\r\n            },\r\n            \"required\": false,\r\n            \"optional\": false,\r\n            \"docs\": {\r\n                \"tags\": [],\r\n                \"text\": \"\"\r\n            },\r\n            \"attribute\": \"kind\",\r\n            \"reflect\": true,\r\n            \"defaultValue\": \"'icon'\"\r\n        }\r\n    }; }\r\n    static get states() { return {\r\n        \"svgContent\": {}\r\n    }; }\r\n    static get watchers() { return [{\r\n            \"propName\": \"icon\",\r\n            \"methodName\": \"iconChanged\"\r\n        }]; }\r\n}\r\nlet pathId = 0;\r\n"],"mappings":"ugDAAA,IAAMA,YAAc,ykCCCpB,IAAMC,cAAgB,CAClBC,OAAQ,WACRC,KAAM,QACNC,SAAU,iBACVC,aAAc,qBACdC,QAAS,WACTC,SAAU,aAEd,IAAMC,UAAY,GAClB,IAAMC,SAAW,G,IACJC,SAAQ,WACjB,SAAAC,EAAAC,G,yBACIC,KAAKV,KAAO,KACZU,KAAKC,KAAO,M,CAEhBH,EAAAI,UAAAC,YAAA,WACIH,KAAKI,S,EAETN,EAAAI,UAAAG,kBAAA,WACIL,KAAKI,S,EAEHN,EAAAI,UAAAI,SAAN,W,0IAEqB,SAAMC,MAAM,6BAAAC,OAA6BpB,cAAcY,KAAKC,MAAK,KAAAO,OAAIR,KAAKV,KAAI,U,OAArFmB,EAAOC,EAAAC,OACb,GAAIF,GAAQA,EAAKG,GAAI,CACjB,SAAOH,EAAKI,O,KAEX,CACD,MAAM,IAAIC,MAAM,+BAAAN,OAA+BR,KAAKC,KAAI,KAAAO,OAAIR,KAAKV,M,+BAIrEyB,QAAQC,MAAMC,G,qCAGhBnB,EAAAI,UAAAE,QAAN,W,0HACQJ,KAAKV,KAAL,YACM4B,EAAM,GAAAV,OAAGR,KAAKC,KAAI,KAAAO,OAAIR,KAAKV,M,KAC5BK,UAAUuB,GAAX,YACA,IAAKtB,SAASsB,GAAM,CAChBtB,SAASsB,GAAOlB,KAAKM,U,CAEb,SAAMV,SAASsB,I,OAArBC,EAAMT,EAAAC,cACLf,SAASsB,GAChB,GAAIC,EAAK,CAEDC,EAAOD,EAAIE,QAAQ,OAAQ,8CAE/BD,EAAOA,EAAKC,QAAQ,UAAW,QAAAb,OAAQc,SAAQ,UAC/C3B,UAAUuB,GAAOE,C,kBAGzBpB,KAAKuB,WAAa5B,UAAUuB,G,mCAGpCpB,EAAAI,UAAAsB,OAAA,WACI,OAAQC,EAAE,IAAK,CAAEC,MAAO,SAAUC,UAAW3B,KAAKuB,Y,iIA9CrC,GAqGrB,IAAID,OAAS,E"}